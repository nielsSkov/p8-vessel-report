\section{Sensors}\label{sec:sensors}

The control system designed in the vessel requires the presence of sensor data that provide information about the vessel's motion. These are an Inertial Measurement Unit (IMU) and a Global Positioning System (GPS) module.

\subsection{IMU}

The Inertial Measurement Unit installed in the vessel is formed by a triaxial gyroscope with digital range scaling between ±75°/sec, ±150°/sec or ±300°/sec, a triaxial accelerometer with a range of ±18 g and a triaxial magnetometer with a range of ±\num{2.5} gauss. It also contains SPI-compatible serial interface to be able to obtain the data. \cite{IMUDatasheet}
%
\begin{figure}[H]
	\includegraphics[width=0.3\textwidth]{figures/IMU}
	\caption{ADIS16405BMLZ IMU module mounted in the vessel \cite{IMUFigure}}
	\label{fig:IMU}
\end{figure}
%
The data provided by the IMU is used to estimate both the position and the attitude of the vessel and is extracted in the Low Level Interface through SPI serial communication.

%Triaxial, digital gyroscope with digital range scaling
%±75°/sec, ±150°/sec, ±300°/sec settings
%Tight orthogonal alignment, 0.05°
%Triaxial, digital accelerometer, ±18 g
%Triaxial, digital magnetometer, ±2.5 gauss
%SPI-compatible serial interface
%Embedded temperature sensor
%Single-supply operation: 4.75 V to 5.25 V

\subsection{GPS}
The vessel has a UP-501 GPS Receiver installed. It operates with a update frequency up to 10 Hz and its trasmits the received position data through a serial communication to the Low Level Interface. \cite{GPS}
%
\begin{figure}[H]
	\includegraphics[width=0.3\textwidth]{figures/GPS}
	\caption{UP-501 GPS receiver mounted in the vessel \cite{GPS}.}
	\label{fig:GPS}
\end{figure}
%
As the UP-501 is a standard GPS receiver, its precision is in the range of meters \fxnote{How to prove this?? Maybe make a test.}. This makes it cumbersome to control the position of the vessel using only GPS data, and thus, the GPS and the IMU data is combined to obtained the position of the vessel.

\section{Real Time Kinematic (RTK) GPS}
In addition to the UP-501 module, an Emlid Reach RTK GPS is installed. 
An RTK GPS system consists of two parts, a base station, and a rover.
The base station is set up at a stationary location with a known, precise GPS position.
The rover GPS, mounted on the ASV, measures its location, based on GPS satellites and measurements from the base station.\cite{EmlidRTK}

The base station gets its current position same as the rover using approximately the same satellites. Since the true position of the base is known, so is the error of each measurement. This is then sent as correction data to the rover, where the error is compensated for.%\cite{EmlidRTK}

An RTK GPS is able to archive a higher precision than an ordinary GPS by receiving correction data from a base station.
%The correction data is used by the rover to estimate signal disturbances, caused be the signals entering the atmosphere. 
This enables it to increase the precision of the GPS measurements, from 2-5m down to a theoretical precision of a few centimeters.\cite{EmlidRTK}

This data is formatted as an RTCM3 message, which is a protocol designed for this purpose.
\begin{figure}[H]
	\includegraphics[width=0.6\textwidth]{figures/comunicationSetup.pdf}
	\caption{Overall set up of GPS}
	\label{fig:rtk_GPS}
\end{figure}
\autoref{fig:rtk_GPS} shows how the RTK GPS system is set up. 
The computer runs a Python script which forwards the message to a TCP socket, making it accessible through the Internet. 
The HLI on the vessel connects to this socket and feeds the data to the Rover located on the boat.
For a more detailed description of the setup see \autoref{app:rtk_gps}
