\section{Processing Units}\label{sec:ControlComputation}
The processing units take the sensor data and computes the required actuation output according to the desired motion for the vessel. It is structured in two entities that run in different devices. These entities are the Low Level Interface (LLI) and the High Level Interface (HLI).

\subsection{Low Level Interface} 
The LLI implemented on the vessel runs on a Arduino Mega Development board with and Atmel microcontroller ATMEGA 2560. It is in charge of extracting the sensor data from the IMU and send it to the HLI that runs on the computer. This includes managing the serial communication from the sensors to the Arduino Board and from the Arduino Board to the HLI. 

The LLI also handles the actuators as it receives the command for the thrusters from the HLI and calculates the appropriate PWM so the ESCs make the motors turn at the desired speed.

\subsection{High Level Interface}

The HLI takes care of the control, sensor fusion and trajectory planning algorithms. This includes communicating with the LLI to get sensor data and send commands to the thrusters. 

The HLI is implemented in a ASUS Eee Computer \cite{asus} that runs with Ubuntu 14.04 \cite{ubuntu}. In order to implement the aforementioned algorithms, the Robotic Operating System (ROS) is used. ROS allows programming the different tasks without considering the transmission of data between threads, as this is managed by ROS using its structure of nodes an topics. Besides communication between tasks, it also includes multiple tools and capabilities useful for trajectory planning, computer vision\fxnote{we should probably not mention the vision here?} and others \cite{ROS}.