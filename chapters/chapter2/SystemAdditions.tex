\section{System Additions}
Some changes in GPS and communication setup are made, a full diagram is seen in \autoref{fig:systemDiagram2}.

\begin{figure}[H]
  \includegraphics[width=.65\textwidth]{figures/systemDiagram2}
  \caption{}
  \label{fig:systemDiagram2}
\end{figure}

The Real Time Kinematic GPS system, described in further detail below, is added to obtain better positioning of the ASV. This is necessary to obtain sub-meter positioning, without which the control design would have little impact on the performance of the system.\\
Additionally a VPN server and a USB modem is used to provide user input when the ASV and user are not on the same closed network. This makes it possible to access the ASV through the cellular network and thus eliminates potential problems with regards to range between user and ASV.

\subsection{Real Time Kinematic (RTK) GPS}
\fxnote{sources incoming (:}
In addition to the UP-501 module, an Emlid Reach RTK GPS is installed. 
An RTK GPS system consists of two parts, a base station, and a rover.
The base station is set up at a stationary location with a known, precise GPS position.
The rover GPS, mounted on the ASV, measures its location, based on GPS satellites and measurements from the base station.

The base station gets its current position same as the rover using approximately the same satellites. Since the true position of the base is known, so is the error of each measurement. This is then sent as correction data to the rover, where the error is compensated for.

An RTK GPS is able to archive a higher precision than an ordinary GPS by receiving correction data from a base station.
%The correction data is used by the rover to estimate signal disturbances, caused be the signals entering the atmosphere. 
This enables it to increase the precision of the GPS measurements, from 2-5m down to a theoretical precision of a few centimeters.
This data is formatted as an RTCM3 message, which is a protocol designed for this purpose.
\begin{figure}[H]
	\includegraphics[width=0.8\textwidth]{figures/comunicationSetup.pdf}
	\caption{Overall set up of GPS}
	\label{fig:rtk_GPS}
\end{figure}
\autoref{fig:rtk_GPS} shows how the RTK GPS system is set up. 
The computer runs a Python script which forwards the message to a TCP socket, making it accessible through the Internet. 
The HLI on the vessel connects to this socket and feeds the data to the Rover located on the boat.
For a more detailed description of the setup see \autoref{app:rtk_gps}
